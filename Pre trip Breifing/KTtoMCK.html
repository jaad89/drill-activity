<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show Image and Certificate</title>
    <style>
        /* Responsive image styles */
        .responsive-img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: auto;
        }

        /* Form styles */
        form {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"],
        input[type="date"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        input[type="button"] {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        input[type="button"]:hover {
            background-color: #0056b3;
        }

        /* Certificate styles */
        .certificate {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            background-color: #f9f9f9;
        }

        .certificate p {
            margin: 0;
            padding: 5px 0;
        }

        .certificate .seat-no {
            font-weight: bold;
        }

        .certificate .bottomline {
            border-top: 1px solid #ccc;
            padding-top: 10px;
            margin-top: 10px;
        }
    </style>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
</head>
<body>

<div class="container">
    <!-- Video Form -->
    <form id="videoForm">
        <img src="/image/WhatsApp Image 2023-09-25 at 12.41.04.jpeg"alt="" class="responsive-img">
        <!-- Your form inputs -->
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="vrn">VRN:</label>
        <input type="text" id="vrn" name="vrn" required><br>

        <label for="designation">Designation:</label>
        <input type="text" id="designation" name="designation" required><br>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required><br>
    </form>

    <!-- Button to toggle image and certificate -->
    <input type="button" value="Route RHM" onclick="toggleImageAndCertificate()" id="toggleBtn">
        <!-- Image -->
    <img src="./image/KT TO MCH.png" alt="Image" id="image" class="responsive-img" style="display: none;">

    <!-- Certificate Section -->
    <div id="certificate" class="certificate" style="display: none;">
        <!-- Certificate content goes here -->
    </div>
    <button id="downloadBtn" style="display: none;" onclick="downloadCertificate()">Download Certificate</button>
</div>

<script>
    var isImageShown = false;

    function toggleImageAndCertificate() {
        var image = document.getElementById("image");
        var toggleBtn = document.getElementById("toggleBtn");
        var certificateDiv = document.getElementById("certificate");
        var downloadButton = document.getElementById("downloadBtn");

        if (!isImageShown) {
            // Show image
            image.style.display = "block";
            toggleBtn.value = "Show Certificate";
            // Hide certificate
            certificateDiv.style.display = "none";
            downloadButton.style.display = "none";
        } else {
            // Show certificate
            showCertificate();
            // Show download button
            downloadButton.style.display = "block";
        }

        // Toggle image state
        isImageShown = !isImageShown;
    }

    function showCertificate() {
        // Get form values
        var name = document.getElementById('name').value;
        var vrn = document.getElementById('vrn').value;
        var designation = document.getElementById('designation').value;
        var date = document.getElementById('date').value;

        // Display certificate content
        var certificateDiv = document.getElementById('certificate');
        certificateDiv.innerHTML = `
            <div class="ticket">
                <div class="left">
                    <p class="seat-no">${vrn}</p>
                    
                    <p class="invoice-no">Trip # IOC/KT TO MCH</p>
                </div>
                <div class="right">
                    <div>
                        <p class="seat-no"><H1>Ibrahim Oil Carriers</H1> </p>
                        <p class="seat-no">Certificate of Pre Trip Briefing</p>
                        <p class="seat-no">KT TO MCH</p>
                        <p class="bottomline">This is certify that Mr ${name} (${designation}) on ${date} at ${new Date().toLocaleTimeString()}
                            has completed Pre trip Briefing. Now he is eligible for Trip KT TO MCH. 
                           <li> Follow these instructions carefully:
                            <li> Don't Use Cell Phone While Driving<br>ڈرائیونگ کے دوران موبائل فون سے پرہیز کریں۔
                                <li> Use Seat Belt While Driving<br>ڈرائیونگ کے دوران سیٹ بیلٹ کا استعمال کریں۔
                                    <li> camera is watching your  Behaviour<br>کیمرا آپ کے برتاؤ کو دیکھ رہا ہے۔
                        ۔          <li> Pay particular attention to the speed limit.<br>حد رفتار کا خاص خیال کریں۔                  
                        ۔<li> In case of emergency, contact the emergency number 0304-2374465.<br>ہنگامی صورتحال میں ایمر جنسی نمبر پر رابطہ کریں۔
                            <li> Mandatory use of stop card on any unsafe Action<br>کوئی بھی غیر محفوظ عمل پر اسٹاپ کارڈ کا لازمی استعمال کریں۔   
                                                      
                        </p>
                       
                    </div>
                </div>
            </div>
        `;
        certificateDiv.style.display = 'block';
    }

    function generateInvoiceNumber() {
    return 'IOC/Trip/' + pad(Math.floor(Math.random() * 999) + 1, 3);
}

function pad(number, length) {
    return number.toString().padStart(length, '0');
}


    function downloadCertificate() {
        // Get the certificate content
        var certificateDiv = document.getElementById('certificate');

        // Convert the HTML content to an image using html2canvas
        html2canvas(certificateDiv).then(function(canvas) {
            // Convert the canvas to data URL
            var imageData = canvas.toDataURL('image/jpeg');

            // Create a link element for download
            var link = document.createElement('a');
            link.href = imageData;
            link.download = 'Pre_Trip_Briefing_Certificate.jpeg';

            // Trigger the download
            link.click();
        });
    }
</script>

</body>
</html>
